<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Money Tracker</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <nav class="navbar">
    <!-- Plain navbar, no Menu | Settings -->
  </nav>

  <!-- Calendar on top -->
  <section style="text-align: center; margin-top: 20px;">
    <label for="trackDate">ðŸ“… Select a Date:</label>
    <input type="date" id="trackDate">
    <button onclick="loadTrack()">Show History</button>
    <button onclick="exportTracks()">Export</button>
  </section>

  <header>
    <h1>Daily Money Tracker</h1>
  </header>

  <main>
    <section class="tracker">
      <label for="income">Income</label>
      <input type="number" id="income" placeholder="Enter income" />

      <label for="expenses">Expenses</label>
      <input type="number" id="expenses" placeholder="Enter expenses" />

      <label for="notes">Notes</label>
      <textarea id="notes" placeholder="Enter notes (optional)"></textarea>

      <button onclick="saveTrack()">Save</button>
      <p id="saveStatus" style="color: gold; margin-top: 10px;"></p>
    </section>
  </main>

  <script>
    const storageKey = 'moneyTrackerData';

    function saveTrack() {
      const date = new Date().toISOString().split('T')[0];
      const income = document.getElementById('income').value;
      const expenses = document.getElementById('expenses').value;
      const notes = document.getElementById('notes').value;

      if (!income && !expenses && !notes) return;

      const data = JSON.parse(localStorage.getItem(storageKey)) || {};
      data[date] = { income, expenses, notes };
      localStorage.setItem(storageKey, JSON.stringify(data));

      document.getElementById('saveStatus').textContent = "Your track today was successfully saved.";
      setTimeout(() => {
        document.getElementById('saveStatus').textContent = "";
      }, 3000);

      document.getElementById('income').value = '';
      document.getElementById('expenses').value = '';
      document.getElementById('notes').value = '';
    }

    function loadTrack() {
      const selectedDate = document.getElementById('trackDate').value;
      const data = JSON.parse(localStorage.getItem(storageKey)) || {};
      const track = data[selectedDate];

      if (track) {
        document.getElementById('income').value = track.income;
        document.getElementById('expenses').value = track.expenses;
        document.getElementById('notes').value = track.notes;
        document.getElementById('saveStatus').textContent = `Showing track from ${selectedDate}`;
        setTimeout(() => {
          document.getElementById('saveStatus').textContent = "";
        }, 3000);
      } else {
        document.getElementById('saveStatus').textContent = `No track found for ${selectedDate}`;
        setTimeout(() => {
          document.getElementById('saveStatus').textContent = "";
        }, 3000);
      }
    }

    function exportTracks() {
      const data = JSON.parse(localStorage.getItem(storageKey)) || {};
      let content = 'Saved Tracks:\n\n';

      for (const [date, entry] of Object.entries(data)) {
        content += `Date: ${date}\nIncome: ${entry.income}\nExpenses: ${entry.expenses}\nNotes: ${entry.notes || 'None'}\n\n`;
      }

      const blob = new Blob([content], { type: "text/plain" });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'Money_Tracker_History.txt';
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
    }
  </script>
</body>
</html>
